/* Optimized Font Loading with Progressive Enhancement - Generated by optimize-fonts.js */

/* Critical font preloading - add these to HTML head:
<link rel="preload" href="/fonts/optimized/GeistSans-Variable.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/optimized/noto-color-emoji-core.woff2" as="font" type="font/woff2" crossorigin>
*/

/* Primary UI font - Critical loading */
@font-face {
  font-family: 'GeistSans';
  src:
    url('/fonts/optimized/GeistSans-Variable.woff2') format('woff2'),
    url('/fonts/GeistSans-Variable.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: fallback; /* Use fallback for critical font */
  unicode-range:
    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF,
    U+FFFD;
}

/* Monospace font - Progressive loading */
@font-face {
  font-family: 'GeistMono';
  src:
    url('/fonts/optimized/GeistMono-Variable.woff2') format('woff2'),
    url('/fonts/GeistMono-Variable.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap; /* Non-critical, can swap */
  unicode-range:
    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF,
    U+FFFD;
}

/* Display font - Lazy loading */
@font-face {
  font-family: 'Doto';
  src:
    url('/fonts/optimized/Doto-VariableFont_ROND,wght.woff2') format('woff2'),
    url('/fonts/Doto-VariableFont_ROND,wght.ttf') format('truetype');
  font-weight: 100 900;
  font-style: normal;
  font-display: optional; /* Optional for decorative font */
  unicode-range: U+0000-00FF;
}

/* Emoji Fonts - Core Set (High Priority) */
@font-face {
  font-family: 'NotoColorEmoji';
  src:
    url('/fonts/optimized/noto-color-emoji-core.woff2') format('woff2'),
    url('/fonts/optimized/noto-color-emoji-core.woff') format('woff'),
    url('/fonts/noto-color-emoji-core.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: fallback; /* Critical for emoji display */
  unicode-range:
    U+1F600-1F64F, U+1F300-1F5FF, U+1F680-1F6FF, U+2600-26FF, U+2700-27BF,
    U+1F900-1F9FF;
}

/* Emoji Fonts - Extended Set (Lazy Loaded) */
@font-face {
  font-family: 'NotoColorEmoji';
  src:
    url('/fonts/optimized/noto-color-emoji-extended.woff2') format('woff2'),
    url('/fonts/optimized/noto-color-emoji-extended.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap; /* Non-critical emoji can swap */
  unicode-range: U+1F1E0-1F1FF, U+1FAA0-1FAFF;
}

/* Progressive Font Loading Classes */
.font-loading {
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    sans-serif;
}

.fonts-loaded {
  font-family: var(--font-sans);
}

/* Prevent layout shift during font loading */
@media (prefers-reduced-motion: no-preference) {
  .font-loading {
    font-variation-settings: 'wght' 400; /* Match loaded font weight */
  }
}

/* Enhanced Font Stacks with Fallbacks */
:root {
  --font-sans:
    'GeistSans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
    'Helvetica Neue', Arial, sans-serif;
  --font-mono:
    'GeistMono', ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo,
    Consolas, 'DejaVu Sans Mono', monospace;
  --font-display: 'Doto', 'Inter', system-ui, sans-serif;
  --font-emoji:
    'NotoColorEmoji', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
    'Noto Color Emoji';

  /* Font loading performance metrics */
  --font-fallback-timeout: 3s;
  --font-swap-period: 100ms;
}

/* Optimize for different loading states */
@supports (font-display: optional) {
  .font-display-optional {
    font-display: optional;
  }
}

/* Accessibility: Respect user preferences */
@media (prefers-reduced-data: reduce) {
  /* Skip non-critical fonts on reduced data */
  .font-display-optional {
    font-family: system-ui, sans-serif;
  }
}

/* Performance: Reduce animation during font loading */
.font-loading * {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

/* Font Loading Performance Utilities */
.text-fallback {
  font-family:
    system-ui,
    -apple-system,
    sans-serif;
}

.text-sans {
  font-family: var(--font-sans);
}

.text-mono {
  font-family: var(--font-mono);
}

.text-display {
  font-family: var(--font-display);
}

.text-emoji {
  font-family: var(--font-emoji);
}
